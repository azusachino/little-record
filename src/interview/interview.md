# Interview Notes

## 1. 分布式系统

### 1.1 为什么要进行系统拆分

> 为什么要进行系统拆封? 如何进行系统拆分?拆分后不用 dubbo 可以吗?dubbo 和 shrigt 有什么区别?

啊

### 1.2 分布式服务框架

> 说一下 dubbo 的工作原理? 注册中心挂了可以继续通讯吗?

> dubbo 支持哪些序列化协议? 说一下 hessian 的数据结构? PB 知道吗? 为什么 PB 的效率是最高的?

> dubbo 负载均衡策略和高可用策略都有哪些?动态代理策略呢?

> dubbo 的 spi 思想是什么?

> 如何基于 dubbo 进行服务治理, 服务降级, 失败重试以及超时重试?

> 分布式服务接口的幂等性如何设计? (比如不能重复扣款)

> 分布式服务接口请求的顺序性如何保证?

> 如何自己设计一个类似 dubbo 的 rpc 框架?

### 1.3 分布式锁

> 如何使用 redis 设计分布式锁? 使用 zk 设计分布式锁可以吗? 这两种分布式锁的实现方式哪种效率比较高?

### 1.4 分布式事务

> 分布式事务了解吗? 你们是如何解决分布式事务问题的? TCC 如果出现网络连不通怎么办? XA 的一致性如何保证?

### 1.5 分布式会话

> 集群部署时的分布式 session 如何实现？

## 2. 高并发架构

### 2.1 高并发系统

> 如何设计一个高并发系统？

### 2.2 消息队列

> 为什么使用消息队列啊？消息队列有什么优点和缺点啊？kafka、activemq、rabbitmq、rocketmq 都有什么优点和缺点啊？

解耦， 异步，缓峰

> 如何保证消息队列的高可用啊？

> 如何保证消息不被重复消费啊（如何进行消息队列的幂等性问题）？

> 如何保证消息的可靠性传输（如何处理消息丢失的问题）？

> 如何保证消息的顺序性？

> 如何解决消息队列的延时以及过期失效问题？消息队列满了以后该怎么处理？有几百万消息持续积压几小时，说说怎么解决？

> 如果让你写一个消息队列，该如何进行架构设计啊？说一下你的思路

### 2.3 搜索引擎

> es 的分布式架构原理能说一下么（es 是如何实现分布式的啊）？

> es 写入数据的工作原理是什么啊？es 查询数据的工作原理是什么啊？底层的 lucene 介绍一下呗？倒排索引了解吗？

> es 在数据量很大的情况下（数十亿级别）如何提高查询效率啊？

> es 生产集群的部署架构是什么？每个索引的数据量大概有多少？每个索引大概有多少个分片？

### 2.4 缓存

> 在项目中缓存是如何使用的？缓存如果使用不当会造成什么后果？

> redis 和 memcached 有什么区别？redis 的线程模型是什么？为什么单线程的 redis 比多线程的 memcached 效率要高得多？

> redis 都有哪些数据类型？分别在哪些场景下使用比较合适？

> redis 的过期策略都有哪些？手写一下 LRU 代码实现？

> 如何保证 Redis 高并发、高可用、持久化？redis 的主从复制原理能介绍一下么？redis 的哨兵原理能介绍一下么？

> redis 的持久化有哪几种方式？不同的持久化机制都有什么优缺点？持久化机制具体底层是如何实现的？

> redis 集群模式的工作原理能说一下么？在集群模式下，redis 的 key 是如何寻址的？分布式寻址都有哪些算法？了解一致性 hash 算法吗？如何动态增加和删除一个节点？

> 了解什么是 redis 的雪崩和穿透？redis 崩溃之后会怎么样？系统该如何应对这种情况？如何处理 redis 的穿透？

> 如何保证缓存与数据库的双写一致性？

> redis 的并发竞争问题是什么？如何解决这个问题？了解 Redis 事务的 CAS 方案吗？

> 生产环境中的 redis 是怎么部署的？

### 2.5 分库分表

> 为什么要分库分表（设计高并发系统的时候，数据库层面该如何设计）？用过哪些分库分表中间件？不同的分库分表中间件都有什么优点和缺点？你们具体是如何对数据库如何进行垂直拆分或水平拆分的？

> 现在有一个未分库分表的系统，未来要分库分表，如何设计才可以让系统从未分库分表动态切换到分库分表上？

> 如何设计可以动态扩容缩容的分库分表方案？

> 分库分表之后，id 主键如何处理？

### 2.6 读写分离

> 如何实现 mysql 的读写分离？MySQL 主从复制原理的是啥？如何解决 mysql 主从同步的延时问题？

## 3. 高可用架构

### 3.1 高可用系统

> 如何设计一个高可用系统？

### 3.2 限流

> 如何限流？在工作中是怎么做的？说一下具体的实现？

### 3.3 熔断

> 如何进行熔断？熔断框架都有哪些？具体实现原理知道吗？

### 3.4 降级

> 如何进行降级？
